<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Emergency Service Directory</title>
  <!-- Tailwind CSS  -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    html, body { font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji"; }
  </style>
</head>


<body class="bg-slate-100 text-slate-800">
  <!-- Navbar -->
  <header class="sticky top-0 z-20 bg-white/90 backdrop-blur border-b border-slate-200">
    <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-14 flex items-center justify-between">
      <!-- Left: Logo + Name -->
      <div class="flex items-center gap-2">
        <div class="h-8 w-8 rounded-full grid place-items-center bg-green-600 text-white text-sm shadow">
          <img src="assets/logo.png" alt="Logo" class="h-full w-full object-cover" />

        </div>
        <span class="font-semibold" style="color:#006747;">Emergency <br> Service</span>

      </div>

      <!-- Right: Heart, Coins, Copy Count -->
<div class="flex items-center gap-4 text-sm">
  <!-- Favorites -->
  <div class="flex items-center gap-1" title="Favorites">
    <span id="heartCount" class="font-semibold">0</span>
    <img src="assets/heart.png" alt="Heart" class="h-5 w-5 object-contain" />
  </div>

  <!-- Coins -->
  <div class="flex items-center gap-1" title="Coins">
    <span id="coinCount" class="font-semibold">100</span>
    <img src="assets/coin.png" alt="Coin" class="h-5 w-5 object-contain" />
  </div>

  <!-- Copy count badge -->
  <div class="flex items-center gap-1" title="Copy Count">
    <div class="relative">
      <!-- Rounded rectangle badge with only number -->
      <div class="bg-green-600 text-white font-bold text-xs px-3 py-1 rounded-full flex items-center justify-center">
        <span id="copyCount">0</span>
      </div>
    </div>
  </div>
</div>


    </nav>
  </header>

  <!-- Hero section-->
  <section class="relative">
    <div class="bg-gradient-to-r from-green-900 via-green-800 to-emerald-900 text-white">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10 text-center">
        <div class="mx-auto h-16 w-16 rounded-full bg-white/10 ring-1 ring-white/30 grid place-items-center mb-4 shadow-lg">
          <img src="assets/logo-dark.png" alt="Logo" class="h-15 w-15 object-contain" />
        </div>
        <h1 class="text-2xl sm:text-3xl font-extrabold">Emergency Service Directory</h1>
        <p class="mt-3 text-white/80 max-w-2xl mx-auto text-sm sm:text-base">
          Government Emergency Services at Your Fingertip ‚Äì A Project by  Government of the People‚Äôs Republic of Bangladesh
        </p>
      </div>
    </div>
  </section>

  <!-- Main section including history section and carts section -->
<main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
  <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
    <!-- Cards (span 3 cols on desktop) -->
    <section class="lg:col-span-3">
      <!-- Heading removed -->
      <div id="cardList" class="grid sm:grid-cols-2 xl:grid-cols-3 gap-4"></div>
    </section>

    <!-- History -->
    <aside class="lg:col-span-1">
      <div class="bg-white rounded-2xl shadow border border-slate-200 p-4 h-full flex flex-col">
        <div class="flex items-center justify-between mb-3">
          <div class="flex items-center gap-2">
            <img src="assets/history.png" alt="history" class="h-10 w-10 object-contain" />
            <h3 class="font-semibold">Call History</h3>
          </div>
          <button id="clearHistoryBtn" 
  class="text-sm px-4 py-1.5 bg-[#00A63E] text-white rounded-full hover:bg-green-700 active:scale-[.98]">
  Clear
</button>


        </div>
        <div id="historyList" class="flex-1 overflow-y-auto pr-1 space-y-3">
          <p id="historyEmpty" class="text-sm text-slate-500">No calls yet.</p>
        </div>
      </div>
    </aside>
  </div>
</main>



<!-- card Template design  -->

  <template id="cardTemplate">
    <article class="bg-white rounded-2xl shadow border border-slate-200 p-4 flex flex-col">
      <div class="flex items-start justify-between gap-3">
        <div class="flex items-center gap-3">
          <div class="h-10 w-10 rounded-xl bg-slate-100 grid place-items-center text-xl">
             <span class="icon">‚ùî</span>
          </div>

        </div>
        <button class="like-btn h-9 w-9 grid place-items-center rounded-lg border border-slate-200 hover:bg-pink-50" aria-label="Add to favorites" title="Add to favorites"><img src="assets/like.png" alt="Service Icon" class="h-5 w-5 object-contain" /></button>
      </div>

      <div>
            <h4 class="font-semibold leading-tight name">Service Name</h4>
            <p class="text-xs text-slate-500 leading-tight en-name">English Name</p>
          </div>

      <div class="mt-4">
        <p class="text-3xl font-extrabold tracking-tight number">000</p>
      </div>

      
      <div class="mt-3">
  <span class="inline-flex items-center text-xs font-medium px-2.5 py-1 rounded-full 
               bg-[#F2F2F2] text-[#5C5C5C] border-0 category">
    Category
  </span>
</div>


      <div class="mt-4 flex items-center gap-2">
        <button class="copy-btn flex-1 flex items-center justify-center gap-2 text-sm px-3 py-2 rounded-lg border border-slate-200 bg-slate-50 hover:bg-slate-100" aria-label="Copy number">
          <img src="assets/copy.png" alt="Copy" class="h-5 w-5 object-contain" />
          <span>Copy</span>
        </button>
        
        <button class="call-btn flex-1 flex items-center justify-center gap-2 text-sm px-3 py-2 rounded-lg bg-[#00A63E] text-white hover:bg-[#008330] active:scale-[.99]" aria-label="Call">
  <img src="assets/telephone.png" alt="Call" class="h-5 w-5 object-contain" />
  <span>Call</span>
</button>

      </div>
    </article>
  </template>


  <script>
    // ------- card Data -------
    const services = [
      { id: 'national', icon: 'üö®', name: 'National Emergency Number', en: 'National Emergency ', category: 'All', number: '999' },
      { id: 'police', icon: 'üëÆ', name: 'Police Helpline Number', en: 'Police ', category: 'Police',number: '999' },
      { id: 'fire', icon: 'üî•', name: 'Fire Service Number', en: 'Fire Service ',  category: 'Fire ',number: '999' },
      { id: 'ambulance', icon: 'üöë', name: 'Ambulance Service', en: 'Ambulance ', number: '1994-999999', category: 'Health' },
      { id: 'women', icon: 'üë©\u200düëß', name: 'Women & Child Helpline', en: 'Women & Child ', number: '109', category: 'help' },
      { id: 'anti', icon: 'üõ°Ô∏è', name: 'Anti-Corruption Helpline', en: 'Anti-Corruption', number: '106', category: 'Govt.' },
      { id: 'electricity', icon: 'üí°', name: 'Electricity Helpline', en: 'Electricity outage', number: '16216', category: 'Electricity' },
      { id: 'brac', icon: 'üè•', name: 'Brac Helpline', en: 'Brac ', number: '16445', category: 'NGO' },
      { id: 'railway', icon: 'üöÜ', name: 'Bangladesh Railway Helpline', en: 'Bangladesh Railway ', number: '163', category: 'travel' },
    ];

        let heartCount = 0;
    let coinCount = 100; // default
    let copyCount = 0;

    const heartEl = document.getElementById('heartCount');
    const coinEl = document.getElementById('coinCount');
    const copyEl = document.getElementById('copyCount');
    const listEl = document.getElementById('cardList');
    const historyList = document.getElementById('historyList');
    const historyEmpty = document.getElementById('historyEmpty');

     // ------- Render Cards -------
    function renderCards() {
      const tpl = document.getElementById('cardTemplate');
      services.slice(0, 9).forEach(svc => {
        const node = tpl.content.cloneNode(true);
        node.querySelector('.icon').textContent = svc.icon;
        node.querySelector('.name').textContent = svc.name;
        node.querySelector('.en-name').textContent = svc.en;
        node.querySelector('.category').textContent = svc.category;
        node.querySelector('.number').textContent = svc.number;
        
        // add data attributes for delegation
        node.querySelector('.like-btn').dataset.id = svc.id;
        node.querySelector('.copy-btn').dataset.id = svc.id;
        node.querySelector('.copy-btn').dataset.number = svc.number;
        node.querySelector('.copy-btn').dataset.name = svc.en;
        node.querySelector('.call-btn').dataset.id = svc.id;
        node.querySelector('.call-btn').dataset.number = svc.number;
        node.querySelector('.call-btn').dataset.name = svc.en;

        listEl.appendChild(node);
      });
    }

      // ------- Helpers -------
    function updateCounters() {
      heartEl.textContent = heartCount;
      coinEl.textContent = coinCount;
      copyEl.textContent = copyCount;
    }

    function showHistoryEmpty(show) {
      historyEmpty.style.display = show ? '' : 'none';
    }

    function formatTimestamp(date = new Date()) {
  const time = date.toLocaleTimeString([], { 
    hour: 'numeric', 
    minute: '2-digit', 
    second: '2-digit', 
    hour12: true   
  });
  return `${time}`;
}

    async function copyToClipboard(text) {
      try {
        if (navigator.clipboard && window.isSecureContext) {
          await navigator.clipboard.writeText(text);
          return true;
        }
      } catch (_) { /* fall through to legacy path */ }
      // Fallback (works on non-secure contexts)
      const ta = document.createElement('textarea');
      ta.value = text;
      ta.style.position = 'fixed';
      ta.style.left = '-9999px';
      document.body.appendChild(ta);
      ta.focus();
      ta.select();
      let ok = false;
      try { ok = document.execCommand('copy'); } catch (_) {}
      document.body.removeChild(ta);
      return ok;
    }

    function addHistoryItem(name, number) {
      showHistoryEmpty(false);
      const row = document.createElement('div');
      row.className = 'flex items-start justify-between gap-3 py-2 px-2 rounded-lg border border-slate-200';
      row.innerHTML = `
        <div>
          <p class="font-medium leading-tight">${name}</p>
          <p class="text-xs text-slate-500 leading-tight">${number}</p>
        </div>
        <div class="text-xs text-slate-500 whitespace-nowrap">${formatTimestamp()}</div>
      `;
      historyList.prepend(row);
    }

     // ------- Event Delegation for Card Buttons -------
    listEl.addEventListener('click', async (e) => {
      const likeBtn = e.target.closest('.like-btn');
      const copyBtn = e.target.closest('.copy-btn');
      const callBtn = e.target.closest('.call-btn');

      if (likeBtn) {
        heartCount += 1;
        updateCounters();
        return;
      }

      if (copyBtn) {
        const num = copyBtn.dataset.number;
        const name = copyBtn.dataset.name;
        const ok = await copyToClipboard(num);
        if (ok) {
          alert(`Copied ${name} number: ${num}`);
          copyCount += 1;
          updateCounters();
        } else {
          alert('Copy failed. Please copy manually.');
        }
        return;
      }

      if (callBtn) {
        const num = callBtn.dataset.number;
        const name = callBtn.dataset.name;

        if (coinCount < 20) {
          alert('Not enough coins to place a call. You need at least 20 coins.');
          return;
        }

        // Deduct coins and confirm call
        coinCount -= 20;
        updateCounters();
        alert(`Calling ${name} ( ${num} )...`);
        addHistoryItem(name, num);
        return;
      }
    });

     // ------- Clear History -------
    document.getElementById('clearHistoryBtn').addEventListener('click', () => {
      historyList.innerHTML = '';
      showHistoryEmpty(true);
    });


    









   
  </script>



















</body>
</html>
